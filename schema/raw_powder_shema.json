{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Raw Feed Powder Metadata",
    "description": "Metadata associated with a batch of powder used as raw material for metals added manufacturing",
    "type": "object",
    "properties": {
        "rawPowderID": {
            "title": "Raw Powder ID",
            "description": "Must be unique among all raw powders",
            "type": "string",
            "format": "custom",
            "pattern": "^[a-zA-Z0-9_]+$",
            "propertyOrder": 0
        },
        "alloy": {
            "title": "Powder Alloy",
            "type": "string",
            "enum": [
                "Ti-6Al-4V"
            ],
            "propertyOrder": 1
        },
        "composition": {
            "title": "Powder Composition",
            "description": "Elements present in the powder with weight percents",
            "type": "array",
            "items": {
                "$ref": "#/definitions/compositionElement"
            },
            "minItems": 1,
            "propertyOrder": 2
        },
        "supplyCompany": {
            "title": "Supply Company",
            "type": "string",
            "enum": [
                "ATI"
            ],
            "propertyOrder": 3
        },
        "batchInformation": {
            "Title": "Additional batch information",
            "type": "string",
            "propertyOrder": 4
        },
        "files": {
            "title": "Associated Files",
            "type": "array",
            "items": {
                "$ref": "#/definitions/fileUpload"
            },
            "propertyOrder": 5
        },
        "characteristics": {
            "title": "Powder Characteristics",
            "type": "object",
            "properties": {
                "size": {
                    "title": "Powder Size (microns)",
                    "type": "number",
                    "format": "grid",
                    "minimum": 10,
                    "maximum": 50,
                    "propertyOrder": 0
                },
                "virginPercent": {
                    "title": "Virgin Powder %",
                    "type": "number",
                    "format": "grid",
                    "minimum": 0,
                    "maximum": 100,
                    "propertyOrder": 1
                }
            },
            "required": [
                "powderSize",
                "virginPercent"
            ],
            "propertyOrder": 6
        }
    },
    "required": [
        "rawPowderID",
        "alloy",
        "composition",
        "supplyCompany",
        "characteristics"
    ],
    "definitions": {
        "compositionElement": {
            "title": "Element",
            "type": "object",
            "properties": {
                "element": {
                    "type": "string",
                    "enum": [
                        "Ti",
                        "Al",
                        "V",
                        "Ni",
                        "Cr",
                        "Fe",
                        "Mo",
                        "Nb",
                        "Ta",
                        "Co",
                        "Mn",
                        "Cu",
                        "Si",
                        "C",
                        "S",
                        "P",
                        "B",
                        "O",
                        "N",
                        "H",
                        "Y"
                    ]
                },
                "weightPercent": {
                    "title": "Weight %",
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                }
            },
            "required": [
                "element",
                "weightPercent"
            ]
        },
        "fileUpload": {
            "title": "file",
            "type": "object",
            "format": "grid",
            "properties": {
                "file": {
                    "title": "Upload file",
                    "type": "string",
                    "propertyOrder": 0
                },
                "fileType": {
                    "type": "string",
                    "enum": [
                        "Manufacturer report"
                    ],
                    "propertyOrder": 1
                },
                "button": {
                    "title": "Browse",
                    "format": "button",
                    "options": {
                        "button": {
                            "action": "button1CB",
                            "uploadFor": "file"
                        }
                    },
                    "propertyOrder": 2
                }
            }
        }
    }
}